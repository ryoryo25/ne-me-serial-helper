# ne-me-serial-helper
Help serial number registrations for ≠ME's special events

## ローカルテストサーバ

開発用の簡易サーバを追加しました。プロジェクトルートで以下を実行してください。

```bash
npm install
npm start
```

サーバが立ち上がると `http://localhost:3000` で静的ファイルが配信されます。フォームの送信先に `http://localhost:3000/submit` を指定して「実際に送信する」をオンにすれば受信され、`/submissions` または `/submissions.html` で一覧を確認できます。

注意: 送信される `prefecture` フィールドは都道府県コード（1〜47の数値）になります。送信される `gender` フィールドは `男`→`1`, `女`→`2` の数値になります。

郵便番号と電話番号はそれぞれ分割して送信されます：`zip1`, `zip2`, `tel1`, `tel2`, `tel3`。

送信時に `agree` フィールドが送信され、同意している場合は '1' が送られます。

リダイレクトについて: 現在の送信は `fetch` を使って行っており、`fetch` は自動的にリダイレクトをフォローしますが、ブラウザのページ遷移（URL の移動）は行いません。サーバ側が POST 後に確認ページへリダイレクトする場合、次の選択肢があります。

- 現状のまま `fetch` を使う（推奨）：バッチ送信に向いており、リダイレクト先のページへの遷移は行わないが、最終レスポンスのステータスは確認できる。
- 1件ずつブラウザ送信して遷移を伴わせる（`<form>` を hidden iframe に送る等）：実際のフォーム送信と同様にリダイレクト先に遷移するように見せられるが、処理が複雑になりクロスオリジンの制約で内容取得が難しい。

希望があれば、`fetch` のままにする、あるいは hidden-iframe を使う方式を実装するどちらかを進めます。

